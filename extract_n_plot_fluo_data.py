#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Mon Sep 21 15:51:33 2020

@author: alina

This program extracts fluorescence data from structured .csv files and
plots the values in a box-plot, fluorescence vs. date.

First approach: csv + pygal

Second approach: pandas + matplotlib 
"""


import os
import csv
import itertools

import datetime
import pygal

#######
# bosquejo inicial:

# data = {}

# # using os module
# for file in directory:
#     reader = csv.reader()
#     # read until reader == ROX -- or go to line xxx
#     data[primeros8chardelfile] = [reader]
#     # y despues .append las demas lineas

# plot

# usar datetime para transformar cada key en un datetime object

# box-plot
######

file_path = '/home/alina/Learning_to_Code/My_Projects/raw_readings/test_files'

test_files = os.listdir(file_path)

# filename_1 = "20200102113551_00890018002017-00320181107-874282.csv"

all_data = {}

start = 46
stop = 62

for filename in test_files:
    raw_data =[]
    for i in range(start, stop):
        with open(filename) as f:
            row = next(itertools.islice(csv.reader(f), i, None))
            raw_data.append(row)
    
    file_date = filename[0:8]
    data_points_lists = []
    for item in raw_data:
        x = item[1:len(item)-1]   # I only need raw_data[item][1:25]
        data_points_lists.append(x)
    
    data_points = [data_point for inner_list in data_points_lists for data_point in inner_list]

    if all_data == {}:
        all_data[file_date] = data_points
    else:
        for data_point in data_points:
            all_data[file_date].append(data_point)



# para cada archivo de == fecha, debe tomar los datapoints y agregarlos a una misma lista
# y eso es el value del key-fecha

# cdo cambia la fecha, debe crear una nueva lista y un nuevo key


























# raw_data holds lines 46-62 of the fluorescence file (list of lists)
for item in raw_data:
    print(item)
# ['A', '7441.0', '11269.0', '10401.0', '9238.0', '9243.0', '11866.0', '9755.0', '11832.0', '9448.0', '9524.0', '11769.0', '8578.0', '8722.0', '10085.0', '11308.0', '11088.0', '9494.0', '9322.0', '9676.0', '10281.0', '10231.0', '7751.0', '10748.0', '10848.0', '']
# ['B', '6937.0', '8158.0', '10634.0', '8715.0', '12124.0', '8722.0', '10123.0', '9632.0', '9845.0', '8524.0', '11231.0', '7668.0', '8819.0', '8568.0', '9095.0', '8209.0', '9009.0', '8974.0', '10482.0', '9586.0', '9003.0', '8074.0', '8324.0', '8894.0', '']
# ['C', '6585.0', '11775.0', '9250.0', '8662.0', '9863.0', '8837.0', '9072.0', '9430.0', '10279.0', '9764.0', '10674.0', '8429.0', '8972.0', '9528.0', '9854.0', '9060.0', '10268.0', '9100.0', '10211.0', '9169.0', '8624.0', '9469.0', '9462.0', '8988.0', '']
# ['D', '6902.0', '8878.0', '11233.0', '11624.0', '9576.0', '10124.0', '9878.0', '9266.0', '10411.0', '10445.0', '10745.0', '8831.0', '10566.0', '7990.0', '12580.0', '9023.0', '10886.0', '9225.0', '12141.0', '8314.0', '10587.0', '9507.0', '10160.0', '9676.0', '']
# ['E', '5798.0', '12512.0', '12101.0', '11680.0', '9618.0', '11728.0', '9084.0', '12354.0', '11689.0', '11075.0', '11272.0', '11916.0', '11822.0', '10876.0', '10411.0', '10171.0', '10868.0', '11391.0', '10542.0', '12270.0', '10601.0', '9884.0', '9666.0', '10299.0', '']
# ['F', '8292.0', '11374.0', '12117.0', '10360.0', '9507.0', '10138.0', '11938.0', '10505.0', '11957.0', '11113.0', '13859.0', '10420.0', '13005.0', '10177.0', '13332.0', '10325.0', '11767.0', '8954.0', '12885.0', '10326.0', '13633.0', '11838.0', '16695.0', '13835.0', '']
# ['G', '8731.0', '10398.0', '11694.0', '11908.0', '9121.0', '11933.0', '10237.0', '12939.0', '12316.0', '12914.0', '11843.0', '12041.0', '11582.0', '11679.0', '12599.0', '13109.0', '13403.0', '12509.0', '12569.0', '13832.0', '12340.0', '13117.0', '12752.0', '12464.0', '']
# ['H', '8880.0', '10651.0', '11755.0', '10144.0', '13298.0', '11026.0', '12700.0', '11205.0', '13009.0', '11273.0', '14345.0', '10330.0', '12729.0', '12098.0', '14843.0', '10024.0', '13724.0', '10123.0', '13905.0', '14537.0', '16556.0', '13722.0', '12585.0', '14073.0', '']
# ['I', '7058.0', '11282.0', '13957.0', '11398.0', '11426.0', '12707.0', '12182.0', '12832.0', '13107.0', '12243.0', '11489.0', '10684.0', '10416.0', '11483.0', '13228.0', '12464.0', '12186.0', '12977.0', '14107.0', '12795.0', '12618.0', '14114.0', '13143.0', '11269.0', '']
# ['J', '8116.0', '11824.0', '13114.0', '11833.0', '9919.0', '10145.0', '9261.0', '11738.0', '13605.0', '7565.0', '12835.0', '10005.0', '11639.0', '10585.0', '15743.0', '10466.0', '14706.0', '9723.0', '16413.0', '14608.0', '14145.0', '14769.0', '13442.0', '13119.0', '']
# ['K', '6272.0', '9382.0', '11523.0', '8837.0', '12356.0', '9157.0', '12587.0', '12086.0', '12502.0', '11531.0', '10671.0', '10916.0', '10395.0', '10896.0', '11341.0', '12645.0', '11500.0', '12636.0', '13067.0', '13237.0', '12765.0', '11469.0', '12144.0', '12364.0', '']
# ['L', '7044.0', '8371.0', '13805.0', '9444.0', '11571.0', '10040.0', '11964.0', '9126.0', '11666.0', '10991.0', '11116.0', '8712.0', '11469.0', '9514.0', '13271.0', '9643.0', '12370.0', '11129.0', '11457.0', '9145.0', '9996.0', '10736.0', '9711.0', '9399.0', '']
# ['M', '6670.0', '9339.0', '10664.0', '11595.0', '10866.0', '9039.0', '9318.0', '10123.0', '10154.0', '11610.0', '9878.0', '9870.0', '11399.0', '9634.0', '10766.0', '10285.0', '10128.0', '10645.0', '10395.0', '10849.0', '11044.0', '9636.0', '8318.0', '9770.0', '']
# ['N', '7167.0', '9825.0', '13199.0', '10291.0', '12262.0', '9912.0', '10533.0', '9246.0', '11552.0', '7680.0', '11676.0', '8693.0', '11513.0', '7833.0', '11442.0', '9106.0', '10226.0', '8771.0', '12716.0', '9458.0', '9788.0', '8552.0', '10552.0', '9282.0', '']
# ['O', '5431.0', '9583.0', '8764.0', '8445.0', '8053.0', '8477.0', '7029.0', '9192.0', '8832.0', '9974.0', '7251.0', '9436.0', '8116.0', '8565.0', '8858.0', '9131.0', '8731.0', '9848.0', '8167.0', '11484.0', '8631.0', '10199.0', '8385.0', '9762.0', '']
# ['P', '8177.0', '8245.0', '10969.0', '7797.0', '10141.0', '8319.0', '10227.0', '9843.0', '10028.0', '10266.0', '10761.0', '9621.0', '10635.0', '8678.0', '11415.0', '9674.0', '10024.0', '9840.0', '10291.0', '8092.0', '11590.0', '9236.0', '10498.0', '9534.0', '']












